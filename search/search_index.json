{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Introduction","text":""},{"location":"#rationale","title":"Rationale","text":"<p>Taking inspiration from the Contract-First Development approach, this small tool aims to simplify the development of Python CLI with Click to be integrated in CWL Command Line Tool.</p> <p>Defining the Interface(s) first in the CWL not only speeds up the development, it also alleviates developers to manually write the boilerplate code to implement the CLIs.</p>"},{"location":"#usage","title":"Usage","text":""},{"location":"#installation","title":"Installation","text":"<p><code>cwl2click</code> is published on Pypi, users just have to execute</p> <pre><code>pip install cwl2click\n</code></pre>"},{"location":"adopters/","title":"Adopters recommendations","text":""},{"location":"adopters/#on-cwl","title":"On CWL","text":"<p>When submitting CWL document(s) to <code>cwl2click</code>, please mind the following constraints:</p> <ul> <li><code>CommandLineTool</code>s only will be taken in consideration;</li> <li>The <code>click.Command</code> name is derived from <code>baseCommand</code> and <code>arguments</code> declarations, accepting the patterns below:</li> </ul> <p>both <code>baseCommand</code> and <code>arguments</code> are declared </p> <pre><code>baseCommand: runner\narguments:\n- crop-cli\n</code></pre> <pre><code>baseCommand: \n- runner\narguments:\n- crop-cli\n</code></pre> <p><code>baseCommand</code> only is declared:</p> <pre><code>baseCommand:\n- runner\n- crop-cli\narguments: []\n</code></pre> <p>In all the cases above, the resulting <code>click.Command</code> will result being <code>crop-cli</code> Any other case will force <code>cwl2click</code> not able to detect the command name, then an exception will be thrown.</p> <ul> <li><code>click.Option</code> parameter declaration is derived from <code>inputs[].inputBinding.prefix</code>, i.e.</li> </ul> <pre><code>  - class: CommandLineTool\n    id: crop\n    baseCommand: \n    - runner\n    arguments:\n    - crop-cli\n    inputs:\n      item:\n        type: Directory\n        inputBinding:\n          prefix: --input-item\n...\n</code></pre> <p>will result to</p> <pre><code>cli.add_command(\n    click.Command(\n        name=\"crop-cli\",\n        callback=crop_command,\n        params=[\n            click.Option(\n                [\"--input-item\"],\n                \"item\",\n                type=click.Path(path_type=Path, exists=True, readable=True, resolve_path=True, file_okay=False, dir_okay=True),\n                multiple=False,\n                required=True,\n                is_flag=False,\n\n            ),\n...\n</code></pre> <p>If <code>inputs[].inputBinding.prefix</code> is not found, it will follow up on <code>--{{inputs[].id}}</code></p> <ul> <li>Users have in charge to implement all the callback functions - <code>click2cwl</code> generates the interface only, concrete implementations must be provided by implementors!</li> </ul>"},{"location":"crosswalk/","title":"Crosswalk","text":"CWL Type Click Type <code>int</code> <code>click.INT</code> <code>long</code> <code>click.INT</code> <code>double</code> <code>click.FLOAT</code> <code>float</code> <code>click.FLOAT</code> <code>boolean</code> <code>click.BOOL</code> <code>string</code> <code>click.STRING</code> <code>Directory</code> <code>click.Path(file_okay=False, dir_okay=True)</code> <code>File</code> <code>click.Path(file_okay=True, dir_okay=False)</code> <code>https://raw.githubusercontent.com/eoap/schemas/main/string_format.yaml#DateTime</code> <code>click.DateTime(formats=['%Y-%m- %d T%H:%M:%S'])</code> <code>https://raw.githubusercontent.com/eoap/schemas/main/string_format.yaml#UUID</code> <code>click.UUID</code> <p>Any other unsupported type is threated like a <code>click.STRING</code>.</p>"},{"location":"execution/","title":"Execution","text":"<p>Based on a KISS approach:</p> <pre><code>$ cwl2click --help\nUsage: cwl2click [OPTIONS] WORKFLOW\n\nOptions:\n  --workflow-id TEXT  ID(s) of the CommandLineTools\n  --output PATH       Output directory path  [required]\n  --help              Show this message and exit.\n</code></pre> <p>Users can generate <code>Click</code> code by executing:</p> <pre><code>cwl2click \\\n--output /path/to/your-project/src/your-module \\\nhttps://raw.githubusercontent.com/eoap/application-package-patterns/refs/heads/main/cwl-workflow/pattern-12.cwl\n</code></pre> <p>and monitor the execution:</p> <pre><code>2025-12-24 10:55:57.416 | DEBUG    | cwl_loader:load_cwl_from_location:228 - Loading CWL document from https://raw.githubusercontent.com/eoap/application-package-patterns/refs/heads/main/cwl-workflow/pattern-12.cwl...\n2025-12-24 10:55:57.664 | DEBUG    | cwl_loader:_load_cwl_from_stream:231 - Reading stream from https://raw.githubusercontent.com/eoap/application-package-patterns/refs/heads/main/cwl-workflow/pattern-12.cwl...\n2025-12-24 10:55:57.689 | DEBUG    | cwl_loader:load_cwl_from_stream:203 - CWL data of type &lt;class 'ruamel.yaml.comments.CommentedMap'&gt; successfully loaded from stream\n2025-12-24 10:55:57.689 | DEBUG    | cwl_loader:load_cwl_from_yaml:143 - No needs to update the Raw CWL document since it targets already the v1.2\n2025-12-24 10:55:57.689 | DEBUG    | cwl_loader:load_cwl_from_yaml:145 - Parsing the raw CWL document to the CWL Utils DOM...\n2025-12-24 10:56:04.305 | DEBUG    | cwl_loader:load_cwl_from_yaml:158 - Raw CWL document successfully parsed to the CWL Utils DOM!\n2025-12-24 10:56:04.305 | DEBUG    | cwl_loader:load_cwl_from_yaml:160 - Dereferencing the steps[].run...\n2025-12-24 10:56:04.305 | DEBUG    | cwl_loader:_on_process:78 - Checking if https://raw.githubusercontent.com/eoap/application-package-patterns/refs/heads/main/cwl-workflow/pattern-12.cwl#crop must be externally imported...\n2025-12-24 10:56:04.305 | DEBUG    | cwl_loader:_on_process:82 - run_url: https://raw.githubusercontent.com/eoap/application-package-patterns/refs/heads/main/cwl-workflow/pattern-12.cwl - uri: https://raw.githubusercontent.com/eoap/application-package-patterns/refs/heads/main/cwl-workflow/pattern-12.cwl\n2025-12-24 10:56:04.305 | DEBUG    | cwl_loader:_on_process:78 - Checking if https://raw.githubusercontent.com/eoap/application-package-patterns/refs/heads/main/cwl-workflow/pattern-12.cwl#norm_diff must be externally imported...\n2025-12-24 10:56:04.305 | DEBUG    | cwl_loader:_on_process:82 - run_url: https://raw.githubusercontent.com/eoap/application-package-patterns/refs/heads/main/cwl-workflow/pattern-12.cwl - uri: https://raw.githubusercontent.com/eoap/application-package-patterns/refs/heads/main/cwl-workflow/pattern-12.cwl\n2025-12-24 10:56:04.305 | DEBUG    | cwl_loader:_on_process:78 - Checking if https://raw.githubusercontent.com/eoap/application-package-patterns/refs/heads/main/cwl-workflow/pattern-12.cwl#otsu must be externally imported...\n2025-12-24 10:56:04.305 | DEBUG    | cwl_loader:_on_process:82 - run_url: https://raw.githubusercontent.com/eoap/application-package-patterns/refs/heads/main/cwl-workflow/pattern-12.cwl - uri: https://raw.githubusercontent.com/eoap/application-package-patterns/refs/heads/main/cwl-workflow/pattern-12.cwl\n2025-12-24 10:56:04.305 | DEBUG    | cwl_loader:load_cwl_from_yaml:167 - steps[].run successfully dereferenced! Dereferencing the FQNs...\n2025-12-24 10:56:04.305 | DEBUG    | cwl_loader:load_cwl_from_yaml:171 - CWL document successfully dereferenced! Now verifying steps[].run integrity...\n2025-12-24 10:56:04.305 | DEBUG    | cwl_loader:load_cwl_from_yaml:175 - All steps[].run link are resolvable! \n2025-12-24 10:56:04.305 | DEBUG    | cwl_loader:load_cwl_from_yaml:178 - Sorting Process instances by dependencies....\n2025-12-24 10:56:04.305 | DEBUG    | cwl_loader:load_cwl_from_yaml:180 - Sorting process is over.\n2025-12-24 10:56:04.305 | DEBUG    | cwl_loader:_load_cwl_from_stream:240 - Stream from https://raw.githubusercontent.com/eoap/application-package-patterns/refs/heads/main/cwl-workflow/pattern-12.cwl successfully load!\n2025-12-24 10:56:04.305 | DEBUG    | cwl2click.cli:main:89 - Input CWL Document from https://raw.githubusercontent.com/eoap/application-package-patterns/refs/heads/main/cwl-workflow/pattern-12.cwl is a $graph:\n2025-12-24 10:56:04.305 | DEBUG    | cwl2click.cli:_add_if_eligible:72 - * Checking 'norm_diff'...\n2025-12-24 10:56:04.305 | DEBUG    | cwl2click.cli:_add_if_eligible:74 -   'norm_diff' is a CommandLineTool instance\n2025-12-24 10:56:04.305 | DEBUG    | cwl2click.cli:_add_if_eligible:83 -   Include list not defined, processing 'norm_diff'\n2025-12-24 10:56:04.305 | DEBUG    | cwl2click.cli:_add_if_eligible:72 - * Checking 'otsu'...\n2025-12-24 10:56:04.305 | DEBUG    | cwl2click.cli:_add_if_eligible:74 -   'otsu' is a CommandLineTool instance\n2025-12-24 10:56:04.305 | DEBUG    | cwl2click.cli:_add_if_eligible:83 -   Include list not defined, processing 'otsu'\n2025-12-24 10:56:04.305 | DEBUG    | cwl2click.cli:_add_if_eligible:72 - * Checking 'crop'...\n2025-12-24 10:56:04.305 | DEBUG    | cwl2click.cli:_add_if_eligible:74 -   'crop' is a CommandLineTool instance\n2025-12-24 10:56:04.305 | DEBUG    | cwl2click.cli:_add_if_eligible:83 -   Include list not defined, processing 'crop'\n2025-12-24 10:56:04.306 | DEBUG    | cwl2click.cli:_add_if_eligible:72 - * Checking 'pattern-12'...\n2025-12-24 10:56:04.306 | WARNING  | cwl2click.cli:_add_if_eligible:86 -   'pattern-12' is not a CommandLineTool instance, discarding\n2025-12-24 10:56:04.306 | INFO     | cwl2click.cli:main:101 - ------------------------------------------------------------------------\n2025-12-24 10:56:04.306 | DEBUG    | cwl2click.cli:main:102 - Processing CommadLineTools ['norm_diff', 'otsu', 'crop']\n2025-12-24 10:56:04.306 | DEBUG    | cwl2click.cli:main:110 - https://raw.githubusercontent.com/eoap/application-package-patterns/refs/heads/main/cwl-workflow/pattern-12.cwl was parsed from a URL, normalizing...\n2025-12-24 10:56:04.309 | DEBUG    | cwl2click:to_click_type:94 - Converting &lt;cwl_utils.parser.cwl_v1_2.CommandInputArraySchema object at 0x7ce30a43bf40&gt; CWL type to the related Click type...\n2025-12-24 10:56:04.309 | DEBUG    | cwl2click:to_click_type:94 - Converting Directory CWL type to the related Click type...\n2025-12-24 10:56:04.309 | DEBUG    | cwl2click:to_click_type:94 - Converting https://raw.githubusercontent.com/eoap/schemas/main/string_format.yaml#URI CWL type to the related Click type...\n2025-12-24 10:56:04.309 | DEBUG    | cwl2click:to_click_type:94 - Converting Directory CWL type to the related Click type...\n2025-12-24 10:56:04.309 | DEBUG    | cwl2click:to_click_type:94 - Converting Directory CWL type to the related Click type...\n2025-12-24 10:56:04.309 | DEBUG    | cwl2click:to_click_type:94 - Converting https://raw.githubusercontent.com/eoap/schemas/main/string_format.yaml#URI CWL type to the related Click type...\n2025-12-24 10:56:04.309 | DEBUG    | cwl2click:to_click_type:94 - Converting Directory CWL type to the related Click type...\n2025-12-24 10:56:04.309 | DEBUG    | cwl2click:to_click_type:94 - Converting https://raw.githubusercontent.com/eoap/schemas/main/ogc.yaml#BBox CWL type to the related Click type...\n2025-12-24 10:56:04.309 | DEBUG    | cwl2click:to_click_type:94 - Converting https://raw.githubusercontent.com/eoap/schemas/main/ogc.yaml#BBox CWL type to the related Click type...\n2025-12-24 10:56:04.309 | DEBUG    | cwl2click:to_click_type:94 - Converting string CWL type to the related Click type...\n2025-12-24 10:56:04.309 | DEBUG    | cwl2click:to_click_type:94 - Converting https://raw.githubusercontent.com/eoap/schemas/main/string_format.yaml#URI CWL type to the related Click type...\n2025-12-24 10:56:04.310 | SUCCESS  | cwl2click.cli:main:128 - 'https://raw.githubusercontent.com/eoap/application-package-patterns/refs/heads/main/cwl-workflow/pattern-12.cwl' successfully converted to Click Python application in '/path/to/your-project/src/your-module/pattern-12.py'.\n2025-12-24 10:56:04.310 | INFO     | cwl2click.cli:main:130 - ------------------------------------------------------------------------\n2025-12-24 10:56:04.310 | SUCCESS  | cwl2click.cli:main:131 - BUILD SUCCESS\n2025-12-24 10:56:04.310 | INFO     | cwl2click.cli:main:139 - ------------------------------------------------------------------------\n2025-12-24 10:56:04.310 | INFO     | cwl2click.cli:main:140 - Total time: 6.8937 seconds\n2025-12-24 10:56:04.310 | INFO     | cwl2click.cli:main:141 - Finished at: 2025-12-24T10:56:04.310\n</code></pre> <p>As reported in the <code>SUCCESS</code> logging message, the <code>Click</code> application is serialized to the <code>/path/to/your-project/src/your-module/pattern-12.py</code> file:</p> <pre><code># File generated by cwl2click v0.30.0\n# timestamp: 2025-12-24T10:56:04.309\n\nfrom norm_diff_impl import execute as norm_diff_command\nfrom otsu_impl import execute as otsu_command\nfrom crop_impl import execute as crop_command\n\nfrom pathlib import Path\n\nimport click\n\n@click.group()\ndef cli() -&gt; None:\n    pass\n\ncli.add_command(\n    click.Command(\n        name=\"ndi-cli\",\n        callback=norm_diff_command,\n        # CODE OMITTED FOR SIMPLICITY\n    )\n)\n\ncli.add_command(\n    click.Command(\n        name=\"otsu-cli\",\n        callback=otsu_command,\n        params=[\n            click.Option(\n                [\"--input-ndi\"],\n                \"raster\",\n                type=click.Path(path_type=Path, exists=True, readable=True, resolve_path=True, file_okay=False, dir_okay=True),\n                multiple=False,\n                required=True,\n                is_flag=False,\n\n            ),\n            click.Option(\n                [\"--item\"],\n                \"item\",\n                type=click.Path(path_type=Path, exists=True, readable=True, resolve_path=True, file_okay=False, dir_okay=True),\n                multiple=False,\n                required=True,\n                is_flag=False,\n\n            ),\n            click.Option(\n                [\"None\"],\n                \"collection\",\n                type=click.STRING,\n                multiple=False,\n                required=True,\n                is_flag=False,\n\n            ),\n        ]\n    )\n)\n\ncli.add_command(\n    click.Command(\n        name=\"crop-cli\",\n        callback=crop_command,\n        # CODE OMITTED FOR SIMPLICITY\n    )\n)\n</code></pre>"},{"location":"execution/#include-list","title":"Include list","text":"<p>By default, <code>cwl2click</code> will transpile all the <code>CommandLineTool</code> found instances inside the CWL, in case users are interested in just one sub-set, can use the <code>--workflow-id</code> option:</p> <pre><code>cwl2click \\\n--output /path/to/your-project/src/your-module \\\n--workflow-id crop \\\n--workflow-id otsu \\\nhttps://raw.githubusercontent.com/eoap/application-package-patterns/refs/heads/main/cwl-workflow/pattern-12.cwl\n</code></pre> <p>By executing this example, <code>ndi-cli</code> won't be generated.</p>"}]}